<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="affiliatedOrganMapper">

	<resultMap id="affiliatedOrganResult" type="affiliatedOrganDto">
		<id column="aff_no" property="affNo"/>
		<result column="aff_name" property="affName" />
		<result column="aff_location" property="affLocation" />
		<result column="start_date" property="startDate" />
		<result column="end_date" property="endDate" />
		<result column="mem_no" property="memNo" />
		<result column="latitude" property="latitude" />
		<result column="longitude" property="longitude" />
		<result column="major_no" property="majorNo" />
		<result column="aff_etc" property="affEtc" />	
		<result column="reason" property="reason" />
	</resultMap>
	
	<select id="selectAffiliatedOrganListCount" resultType="_int">
		select
  				 count(*)
			from affiliated_organ
	</select>
	
	<select id="selectAffiliatedOrganList" resultMap="affiliatedOrganResult">
  	select
		    	aff_no
			  , aff_name
			  , aff_location
			  , major_no
		 from affiliated_organ
		order by aff_no asc
  </select>
  
  <select id="selectAffiliatedOrganRes" resultMap="affiliatedOrganResult">
	  select
				   aff_no
				 , aff_name
				 , major_no
				 , aff_location
				 , start_date
				 , end_date
				 , latitude
				 , longitude
				 , aff_etc
				 , reason
		  from affiliated_organ
		 where aff_no=#{affNo}
  </select>

  <insert id="insertAffiliatedOrgan">
  	insert 
  		into affiliated_organ
  			 (
  				 aff_no, aff_name, major_no
  			 , aff_location, latitude, longitude, aff_etc
				 )
					values
	 	 		(	
			 	 	 seq_aff_no.nextval, #{affName}, #{majorNo}
			 	 , #{affLocation}, #{latitude}, #{longitude}, #{affEtc}
			 	 )
  </insert>

</mapper>
